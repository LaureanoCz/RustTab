<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='./css/auth/login.css') }}">
</head>
<body>
    <header>
        <a href="{{url_for('home')}}">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
            stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-home">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M3 12l2 -2l7 -7l7 7l2 2v8a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z" />
            <path d="M9 21v-6a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6" />
            </svg>
        </a>
    </header>
    <!-- Registration success notification modal -->
    <div id="registrationSuccessNotification" class="logout-notification" style="display: none;">
        <div class="register-notification-content">
            <p>Usuario creado correctamente</p>
        </div>
    </div>
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            <div class="error-message">
                {% for message in messages %}
                    <p>{{ message }}</p>
                {% endfor %}
            </div>
            <span class="close-btn">✕</span>
        {% endif %}
    {% endwith %}
    <main>
        <div class="container">
            <img src="{{ url_for('static', filename='./images/lr/guitar1.webp')}}" alt="">
            <div class="form-container">
                <h1>Iniciar sesion</h1>
                <form action="/login" method="POST">
                    <div class="li">
                        <label for="username">Nombre de usuario</label>
                        <input type="text" id="username" name="username" required>

                        <label for="password">Contraseña</label>
                        <input type="password" id="password" name="password" required>
                    </div>
                    <button type="submit">Iniciar sesion</button>
                </form>
                <span>¿Todavia no tenes una cuenta?</span>
                <a href="{{ url_for('register') }}">Registrate</a>
            </div>
        </div>
    </main>
    <script src="{{ url_for('static', filename='js/flash_message.js') }}"></script>
    <script>
        // Check for registration success notification
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('registered') === 'success') {
                const registrationSuccessNotification = document.getElementById('registrationSuccessNotification');
                if (registrationSuccessNotification) {
                    registrationSuccessNotification.style.display = 'flex';
                    
                    // Auto-hide after 3 seconds
                    setTimeout(function() {
                        registrationSuccessNotification.style.display = 'none';
                    }, 3000);
                    
                    // Clean URL (remove query parameter)
                    window.history.replaceState({}, document.title, window.location.pathname);
                }
            }
        });
    </script>
</body>
</html>